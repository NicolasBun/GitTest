<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Embree: embree::BVH2BuilderSpatial Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.3 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Embree</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><b>embree</b>      </li>
      <li class="navelem"><a class="el" href="classembree_1_1_b_v_h2_builder_spatial.html">BVH2BuilderSpatial</a>      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pub-static-attribs">Static Public Attributes</a>  </div>
  <div class="headertitle">
<h1>embree::BVH2BuilderSpatial Class Reference</h1>  </div>
</div>
<div class="contents">
<!-- doxytag: class="embree::BVH2BuilderSpatial" --><!-- doxytag: inherits="embree::Builder" -->
<p><a class="el" href="classembree_1_1_b_v_h2.html" title="Binary BVH datastructure.">BVH2</a> spatial split builder.  
<a href="#_details">More...</a></p>

<p><code>#include &lt;<a class="el" href="bvh2__builder__spatial_8h_source.html">bvh2_builder_spatial.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for embree::BVH2BuilderSpatial:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classembree_1_1_b_v_h2_builder_spatial.png" usemap="#embree::BVH2BuilderSpatial_map" alt=""/>
  <map id="embree::BVH2BuilderSpatial_map" name="embree::BVH2BuilderSpatial_map">
<area href="classembree_1_1_builder.html" alt="embree::Builder" shape="rect" coords="0,0,171,24"/>
</map>
 </div></div>

<p><a href="classembree_1_1_b_v_h2_builder_spatial-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classembree_1_1_b_v_h2_builder_spatial_1_1_build_task_high.html">BuildTaskHigh</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Single-threaded breadth-first build task.  <a href="classembree_1_1_b_v_h2_builder_spatial_1_1_build_task_high.html#_details">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classembree_1_1_b_v_h2_builder_spatial_1_1_build_task_low.html">BuildTaskLow</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Single-threaded breadth-first build task.  <a href="classembree_1_1_b_v_h2_builder_spatial_1_1_build_task_low.html#_details">More...</a><br/></td></tr>
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classembree_1_1_b_v_h2_builder_spatial.html#a81b3321a25c2bf179e17e64b1e0f4879">BVH2BuilderSpatial</a> (const BuildTriangle *triangles, size_t numTriangles, Ref&lt; <a class="el" href="classembree_1_1_b_v_h2.html">BVH2</a>&lt; <a class="el" href="structembree_1_1_triangle4.html">Triangle4</a> &gt; &gt; bvh)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructs the builder.  <a href="#a81b3321a25c2bf179e17e64b1e0f4879"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a560f6c1a5e52add82d7887aada313eb4"></a><!-- doxytag: member="embree::BVH2BuilderSpatial::build" ref="a560f6c1a5e52add82d7887aada313eb4" args="(const BuildTriangle *triangles, size_t numTriangles)" -->
static Ref&lt; <a class="el" href="classembree_1_1_b_v_h2.html">BVH2</a>&lt; <a class="el" href="structembree_1_1_triangle4.html">Triangle4</a> &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classembree_1_1_b_v_h2_builder_spatial.html#a560f6c1a5e52add82d7887aada313eb4">build</a> (const BuildTriangle *triangles, size_t numTriangles)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">API entry function for the builder. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static __forceinline size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classembree_1_1_b_v_h2_builder_spatial.html#a4a626cb46cdadb3cec1c339a913d8104">blocks</a> (size_t x)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Computes the number of blocks of a number of triangles.  <a href="#a4a626cb46cdadb3cec1c339a913d8104"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="pub-static-attribs"></a>
Static Public Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static const float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classembree_1_1_b_v_h2_builder_spatial.html#a5772bb5554d960c1ac26cad6274598ac">duplicationFactor</a> = 1.5f</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Maximal duplication of triangles through spatial splits.  <a href="#a5772bb5554d960c1ac26cad6274598ac"></a><br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<div class="textblock"><p><a class="el" href="classembree_1_1_b_v_h2.html" title="Binary BVH datastructure.">BVH2</a> spatial split builder. </p>
<p>The builder uses a combined object split and spatial splitting strategy. Object splits are evaluated through binning like in the <a class="el" href="classembree_1_1_b_v_h2_builder.html" title="BVH2 builder.">BVH2Builder</a>, however, a central spatial split in each dimension is considered too. The best of all these splitting possibilities is choosen. Spatial splits cause the number of triangle references to increase through split triangles. The builder bounds this tiangle duplication through the duplicationFactor constant. Through breadth-first construction, the builder is able to distribute the spatial splits evenly over the scene until the maximal triangle duplication is reached. Passes of this breadth-first construction sort primitives from left-to-right and right-to-left in the primitive array. This makes memory management trivial and allows to compactly fill the primitive array. The builder is multi-threaded by first performing a number of single threaded build iterations for the high nodes of the tree (<a class="el" href="classembree_1_1_b_v_h2_builder_spatial_1_1_build_task_high.html" title="Single-threaded breadth-first build task.">BuildTaskHigh</a>) and then distributing work to multiple threads to build the lower nodes of the tree (<a class="el" href="classembree_1_1_b_v_h2_builder_spatial_1_1_build_task_low.html" title="Single-threaded breadth-first build task.">BuildTaskLow</a>). </p>
</div><hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a81b3321a25c2bf179e17e64b1e0f4879"></a><!-- doxytag: member="embree::BVH2BuilderSpatial::BVH2BuilderSpatial" ref="a81b3321a25c2bf179e17e64b1e0f4879" args="(const BuildTriangle *triangles, size_t numTriangles, Ref&lt; BVH2&lt; Triangle4 &gt; &gt; bvh)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">embree::BVH2BuilderSpatial::BVH2BuilderSpatial </td>
          <td>(</td>
          <td class="paramtype">const BuildTriangle *&#160;</td>
          <td class="paramname"><em>triangles</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>numTriangles</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Ref&lt; <a class="el" href="classembree_1_1_b_v_h2.html">BVH2</a>&lt; <a class="el" href="structembree_1_1_triangle4.html">Triangle4</a> &gt; &gt;&#160;</td>
          <td class="paramname"><em>bvh</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Constructs the builder. </p>

<p><p>Allocate array for splitting primitive lists.</p>
<p>Allocate space for job list</p>
<p>Allocate storage for nodes. Each thread should at least be able to get one block.</p>
<p>Allocate storage for triangles. Each thread should at least be able to get one block.</p>
<p>initiate parallel computation of bounds</p>
<p>start build</p>
<p>rotate top part of tree</p>
<p>free temporary memory again </p>
</p>

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a4a626cb46cdadb3cec1c339a913d8104"></a><!-- doxytag: member="embree::BVH2BuilderSpatial::blocks" ref="a4a626cb46cdadb3cec1c339a913d8104" args="(size_t x)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static __forceinline size_t embree::BVH2BuilderSpatial::blocks </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>x</em></td><td>)</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Computes the number of blocks of a number of triangles. </p>

</div>
</div>
<hr/><h2>Member Data Documentation</h2>
<a class="anchor" id="a5772bb5554d960c1ac26cad6274598ac"></a><!-- doxytag: member="embree::BVH2BuilderSpatial::duplicationFactor" ref="a5772bb5554d960c1ac26cad6274598ac" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const float <a class="el" href="classembree_1_1_b_v_h2_builder_spatial.html#a5772bb5554d960c1ac26cad6274598ac">embree::BVH2BuilderSpatial::duplicationFactor</a> = 1.5f<code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Maximal duplication of triangles through spatial splits. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>rtcore/bvh2/<a class="el" href="bvh2__builder__spatial_8h_source.html">bvh2_builder_spatial.h</a></li>
<li>rtcore/bvh2/bvh2_builder_spatial.cpp</li>
</ul>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/><address class="footer"><small>Generated on Fri Jul 29 2011 17:10:16 for Embree by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.3 </small></address>
</body>
</html>
